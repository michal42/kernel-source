From: Michal Hocko <mhocko@suse.cz>
Subject: fm10k: Clean-up page reuse code fix
Patch-mainline: 2f064f3485cd29633ad1b3cfb00cc519509a3d72 (partial)
References: bnc#920016
Git-commit: 4.2-rc8

Partial backport, the rest is in
patches.fixes/mm-make-page-pfmemalloc-check-more-robust.patch much earlier in
the series. We want to keep the patch close to the one which has introduced
page::pfmemalloc so this follow up.

The fix is really trivial page->pfmemalloc needs to be checked via
page_is_pfmemalloc(page) now.
Signed-off-by: Michal Hocko <mhocko@suse.cz>

---
 drivers/net/ethernet/intel/fm10k/fm10k_main.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/drivers/net/ethernet/intel/fm10k/fm10k_main.c
+++ b/drivers/net/ethernet/intel/fm10k/fm10k_main.c
@@ -204,7 +204,7 @@ static void fm10k_reuse_rx_page(struct f
 
 static inline bool fm10k_page_is_reserved(struct page *page)
 {
-	return (page_to_nid(page) != numa_mem_id()) || page->pfmemalloc;
+	return (page_to_nid(page) != numa_mem_id()) || page_is_pfmemalloc(page);
 }
 
 static bool fm10k_can_reuse_rx_page(struct fm10k_rx_buffer *rx_buffer,
