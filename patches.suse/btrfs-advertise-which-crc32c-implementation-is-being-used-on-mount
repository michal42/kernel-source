From: Jeff Mahoney <jeffm@suse.com>
Subject: btrfs: advertise which crc32c implementation is being used on mount
References: bsc#946057
Patch-mainline: Submitted to linux-btrfs, 16 Sep 2015

Since several architectures support hardware-accelerated crc32c 
calculation, it would be nice to confirm that btrfs is actually using it.

We can see an elevated use count for the module, but it doesn't actually
show who the users are.  This patch simply prints the name of the driver
after successfully initializing the shash.

Signed-off-by: Jeff Mahoney <jeffm@suse.com>
---
 fs/btrfs/hash.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/fs/btrfs/hash.c
+++ b/fs/btrfs/hash.c
@@ -23,6 +23,8 @@ int __init btrfs_hash_init(void)
 	if (IS_ERR(tfm))
 		return PTR_ERR(tfm);
 
+	printk("BTRFS: using %s for crc32c\n",
+	       crypto_tfm_alg_driver_name(crypto_shash_tfm(tfm)));
 	return 0;
 }
 
