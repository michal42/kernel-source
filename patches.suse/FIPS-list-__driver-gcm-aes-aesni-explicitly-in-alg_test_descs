From: Alexander Bergmann <abergmann@suse.com>
To: fips@suse.de
Subject: __driver-gcm-aes-aesni needs to be listed explicitly inside the testmgr.c file.
Patch-mainline: v3.6-rc1
Git-commit: 6c79294f44fd7d1122cbaabff3b9815b074c0dd0 (partial)
References: bsc#914457

We had to change two things to get the kernel working with
rfc4106(gcm(aes)) in FIPS mode.

1. The __driver-gcm-aes-aesni needs to be listed explicitly inside the
   testmgr.c file.

Acked-by: Torsten Duwe <duwe@suse.de>

--- a/crypto/testmgr.c
+++ b/crypto/testmgr.c
@@ -1898,6 +1898,10 @@ static const struct alg_test_desc alg_te
 		.alg = "__driver-ecb-twofish-avx",
 		.test = alg_test_null,
 	}, {
+		.alg = "__driver-gcm-aes-aesni",
+		.test = alg_test_null,
+		.fips_allowed = 1,
+	}, {
 		.alg = "__ghash-pclmulqdqni",
 		.test = alg_test_null,
 		.fips_allowed = 1,
